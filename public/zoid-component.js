!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("zoid",[],n):"object"==typeof exports?exports.zoid=n():e.zoid=n()}("undefined"!=typeof self?self:this,function(){return t={},o.m=r=[function(e,n,r){"use strict";function o(e,n){return(o=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function t(e,n){e.prototype=Object.create(n.prototype),o(e.prototype.constructor=e,n)}function Ne(){return(Ne=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r,t=arguments[n];for(r in t)!{}.hasOwnProperty.call(t,r)||(e[r]=t[r])}return e}).apply(this,arguments)}function s(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&"function"==typeof window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&"function"==typeof window.constructor&&e instanceof window.constructor)return!1;var n={}.toString;if(n){n=n.call(e);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}r.r(n),r.d(n,"PopupOpenError",function(){return on}),r.d(n,"create",function(){return Ar}),r.d(n,"destroy",function(){return Tr}),r.d(n,"destroyComponents",function(){return jr}),r.d(n,"destroyAll",function(){return Rr}),r.d(n,"PROP_TYPE",function(){return dr}),r.d(n,"PROP_SERIALIZATION",function(){return fr}),r.d(n,"CONTEXT",function(){return lr}),r.d(n,"EVENT",function(){return hr});var i,a=[],u=[],c=0;function d(){var e;!c&&i&&(e=i,i=null,e.resolve())}function f(){c+=1}function l(){--c,d()}var Ae=((n=h.prototype).resolve=function(e){if(this.resolved||this.rejected)return this;if(s(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},n.reject=function(e){var n,r=this;if(this.resolved||this.rejected)return this;if(s(e))throw new Error("Can not reject promise with another promise");return e||(n=e&&"function"==typeof e.toString?e.toString():{}.toString.call(e),e=new Error("Expected reject to be called with Error, got "+n)),this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){r.errorHandled||function(e,n){if(-1===a.indexOf(e)){a.push(e),setTimeout(function(){throw e},1);for(var r=0;r<u.length;r++)u[r](e,n)}}(e,r)},1),this.dispatch(),this},n.asyncReject=function(e){return this.errorHandled=!0,this.reject(e),this},n.dispatch=function(){var e=this.resolved,n=this.rejected,r=this.handlers;if(!this.dispatching&&(e||n)){this.dispatching=!0,f();for(var t=0;t<r.length;t++){var o=r[t],i=o.onSuccess,a=o.onError,u=o.promise,c=void 0;if(e)try{c=i?i(this.value):this.value}catch(e){u.reject(e);continue}else if(n){if(!a){u.reject(this.error);continue}try{c=a(this.error)}catch(e){u.reject(e);continue}}c instanceof h&&(c.resolved||c.rejected)?((o=c).resolved?u.resolve(o.value):u.reject(o.error),o.errorHandled=!0):s(c)?c instanceof h&&(c.resolved||c.rejected)?c.resolved?u.resolve(c.value):u.reject(c.error):function(n){c.then(function(e){n.resolve(e)},function(e){n.reject(e)})}(u):u.resolve(c)}r.length=0,this.dispatching=!1,l()}},n.then=function(e,n){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new h;return this.handlers.push({promise:r,onSuccess:e,onError:n}),this.errorHandled=!0,this.dispatch(),r},n.catch=function(e){return this.then(void 0,e)},n.finally=function(n){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(e){return h.try(n).then(function(){return e})},function(e){return h.try(n).then(function(){throw e})})},n.timeout=function(e,n){var r=this;if(this.resolved||this.rejected)return this;var t=setTimeout(function(){r.resolved||r.rejected||r.reject(n||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){return clearTimeout(t),e})},n.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},n.lazy=function(){return this.errorHandled=!0,this},h.resolve=function(r){return r instanceof h?r:s(r)?new h(function(e,n){return r.then(e,n)}):(new h).resolve(r)},h.reject=function(e){return(new h).reject(e)},h.asyncReject=function(e){return(new h).asyncReject(e)},h.all=function(e){var t=new h,o=e.length,i=[].slice();if(!o)return t.resolve(i),t;for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof h){if(r.resolved){i[n]=r.value,--o;continue}}else if(!s(r)){i[n]=r,--o;continue}!function(n,e,r){e.then(function(e){i[n]=e,0==--o&&t.resolve(i)},function(e){r.reject(e)})}(n,h.resolve(r),t)}return 0===o&&t.resolve(i),t},h.hash=function(r){var e,t={},o=[];for(e in r)!function(n){var e;r.hasOwnProperty(n)&&(s(e=r[n])?o.push(e.then(function(e){t[n]=e})):t[n]=e)}(e);return h.all(o).then(function(){return t})},h.map=function(e,n){return h.all(e.map(n))},h.onPossiblyUnhandledException=function(e){return n=e,u.push(n),{cancel:function(){u.splice(u.indexOf(n),1)}};var n},h.try=function(e,n,r){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var t;f();try{t=e.apply(n,r||[])}catch(e){return l(),h.reject(e)}return l(),h.resolve(t)},h.delay=function(n){return new h(function(e){setTimeout(e,n)})},h.isPromise=function(e){return!!(e&&e instanceof h)||s(e)},h.flush=function(){return e=i=i||new h,d(),e;var e},h);function h(e){var n=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],e){var r,t,o=!1,i=!1,a=!1;f();try{e(function(e){a?n.resolve(e):(o=!0,r=e)},function(e){a?n.reject(e):(i=!0,t=e)})}catch(e){return l(),void this.reject(e)}l(),a=!0,o?this.resolve(r):i&&this.reject(t)}}function w(e){return"[object RegExp]"==={}.toString.call(e)}var p={IFRAME:"iframe",POPUP:"popup"},m="Call was rejected by callee.\r\n";function v(e){return void 0===e&&(e=window),e.location.protocol}function y(e){if(void 0===e&&(e=window),e.mockDomain){var n=e.mockDomain.split("//")[0];if(n)return n}return v(e)}function g(e){return void 0===e&&(e=window),"about:"===y(e)}function j(e){if(void 0===e&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function R(e){if(void 0===e&&(e=window),e&&!j(e))try{return e.opener}catch(e){}}function b(){try{return 1}catch(e){}}function E(e){void 0===e&&(e=window);var n=e.location;if(!n)throw new Error("Can not read window location");var r=v(e);if(!r)throw new Error("Can not read window protocol");if("file:"===r)return"file://";if("about:"===r){e=j(e);return e&&b()?E(e):"about://"}n=n.host;if(!n)throw new Error("Can not read window host");return r+"//"+n}function je(e){void 0===e&&(e=window);var n=E(e);return n&&e.mockDomain&&0===e.mockDomain.indexOf("mock:")?e.mockDomain:n}function Re(e){if(!function(e){try{if(e===window)return 1}catch(e){}try{var n=Object.getOwnPropertyDescriptor(e,"location");if(n&&!1===n.enumerable)return}catch(e){}try{if(g(e)&&b())return 1}catch(e){}try{if(void 0===(r=e)&&(r=window),"mock:"===y(r)&&b())return 1}catch(e){}var r;try{if(E(e)===E(window))return 1}catch(e){}}(e))return!1;try{if(e===window)return!0;if(g(e)&&b())return!0;if(je(window)===je(e))return!0}catch(e){}return!1}function Te(e){if(!Re(e))throw new Error("Expected window to be same domain");return e}function _(e,n){if(e&&n){var r=j(n);return r?r===e:-1!==function(e){var n=[];try{for(;e.parent!==e;)n.push(e.parent),e=e.parent}catch(e){}return n}(n).indexOf(e)}}function x(n){var r,e,t=[];try{r=n.frames}catch(e){r=n}try{e=r.length}catch(e){}if(0===e)return t;if(e){for(var o=0;o<e;o++){var i=void 0;try{i=r[o]}catch(e){continue}t.push(i)}return t}for(var a=0;a<100;a++){var u=void 0;try{u=r[a]}catch(e){return t}if(!u)return t;t.push(u)}return t}function P(e){for(var n=[],r=0,t=x(e);r<t.length;r++){var o=t[r];n.push(o);for(var i=0,a=P(o);i<a.length;i++)n.push(a[i])}return n}function T(e){void 0===e&&(e=window);try{if(e.top)return e.top}catch(e){}if(j(e)===e)return e;try{if(_(window,e)&&window.top)return window.top}catch(e){}try{if(_(e,window)&&window.top)return window.top}catch(e){}for(var n=0,r=P(e);n<r.length;n++){var t=r[n];try{if(t.top)return t.top}catch(e){}if(j(t)===t)return t}}function k(e){var n=T(e);if(!n)throw new Error("Can not determine top window");n=[].concat(P(n),[n]);return-1===n.indexOf(e)&&(n=[].concat(n,[e],P(e))),n}var O=[],C=[];function ke(e,n){void 0===n&&(n=!0);try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==m}if(n&&Re(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}n=function(e,n){for(var r=0;r<e.length;r++)try{if(e[r]===n)return r}catch(e){}return-1}(O,e);if(-1!==n){n=C[n];if(n&&function(e){if(!e.contentWindow)return 1;if(!e.parentNode)return 1;var n=e.ownerDocument;if(n&&n.documentElement&&!n.documentElement.contains(e)){for(var r=e;r.parentNode&&r.parentNode!==r;)r=r.parentNode;if(!r.host||!n.documentElement.contains(r.host))return 1}}(n))return!0}return!1}function W(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function S(e,n){for(var r=x(e),t=0;t<r.length;t++){var o=r[t];try{if(Re(o)&&o.name===n&&-1!==r.indexOf(o))return o}catch(e){}}try{if(-1!==r.indexOf(e.frames[n]))return e.frames[n]}catch(e){}try{if(-1!==r.indexOf(e[n]))return e[n]}catch(e){}}function D(e,n){return e===R(n)}function Ie(e){return void 0===e&&(e=window),R(e=e||window)||j(e)||void 0}function N(e,n){for(var r=0;r<e.length;r++)for(var t=e[r],o=0;o<n.length;o++)if(t===n[o])return 1}function ze(e){void 0===e&&(e=window);for(var n=0,r=e;r;)(r=j(r))&&(n+=1);return n}function Fe(e,n){var r=T(e)||e,t=T(n)||n;try{if(r&&t)return r===t}catch(e){}var o=k(e),i=k(n);if(N(o,i))return!0;e=R(r),n=R(t);return e&&N(k(e),i)||n&&N(k(n),o),!1}function Me(e,n){if("string"==typeof e){if("string"==typeof n)return"*"===e||n===e;if(w(n))return!1;if(Array.isArray(n))return!1}return w(e)?w(n)?e.toString()===n.toString():!Array.isArray(n)&&Boolean(n.match(e)):!!Array.isArray(e)&&(Array.isArray(n)?JSON.stringify(e)===JSON.stringify(n):!w(n)&&e.some(function(e){return Me(e,n)}))}function Ue(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):je()}function Le(n,r,t,o){var i;return void 0===t&&(t=1e3),void 0===o&&(o=1/0),function e(){return ke(n)?(i&&clearTimeout(i),r()):void(o<=0?clearTimeout(i):(o-=t,i=setTimeout(e,t)))}(),{cancel:function(){i&&clearTimeout(i)}}}function A(e){try{if(e===window)return 1}catch(e){if(e&&e.message===m)return 1}try{if("[object Window]"==={}.toString.call(e))return 1}catch(e){if(e&&e.message===m)return 1}try{if(window.Window&&e instanceof window.Window)return 1}catch(e){if(e&&e.message===m)return 1}try{if(e&&e.self===e)return 1}catch(e){if(e&&e.message===m)return 1}try{if(e&&e.parent===e)return 1}catch(e){if(e&&e.message===m)return 1}try{if(e&&e.top===e)return 1}catch(e){if(e&&e.message===m)return 1}try{if(e&&"__unlikely_value__"===e.__cross_domain_utils_window_check__)return}catch(e){return 1}try{if("postMessage"in e&&"self"in e&&"location"in e)return 1}catch(e){}}function qe(e){if(0!==Ue(e).indexOf("mock:"))return e;throw new Error("Mock urls not supported out of test mode")}function I(e){if(Re(e))return Te(e).frameElement;for(var n=0,r=document.querySelectorAll("iframe");n<r.length;n++){var t=r[n];if(t&&t.contentWindow&&t.contentWindow===e)return t}}function Be(e){if(void 0===(n=e)&&(n=window),Boolean(j(n))){n=I(e);if(n&&n.parentElement)return void n.parentElement.removeChild(n)}var n;try{e.close()}catch(e){}}function z(e,n){for(var r=0;r<e.length;r++)try{if(e[r]===n)return r}catch(e){}return-1}var F,M=((n=U.prototype)._cleanupClosedWindows=function(){for(var e=this.weakmap,n=this.keys,r=0;r<n.length;r++){var t=n[r];if(A(t)&&ke(t)){if(e)try{e.delete(t)}catch(e){}n.splice(r,1),this.values.splice(r,1),--r}}},n.isSafeToReadWrite=function(e){return!A(e)},n.set=function(e,n){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{r.set(e,n)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var t=this.name,o=e[t];return void(o&&o[0]===e?o[1]=n:Object.defineProperty(e,t,{value:[e,n],writable:!0}))}catch(e){}this._cleanupClosedWindows();var i=this.keys,a=this.values,u=z(i,e);-1===u?(i.push(e),a.push(n)):a[u]=n},n.get=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{if(n.has(e))return n.get(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var r=e[this.name];return r&&r[0]===e?r[1]:void 0}catch(e){}this._cleanupClosedWindows();var t=z(this.keys,e);if(-1!==t)return this.values[t]},n.delete=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var r=e[this.name];r&&r[0]===e&&(r[0]=r[1]=void 0)}catch(e){}this._cleanupClosedWindows();var t=this.keys,o=z(t,e);-1!==o&&(t.splice(o,1),this.values.splice(o,1))},n.has=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{if(n.has(e))return!0}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var r=e[this.name];return!(!r||r[0]!==e)}catch(e){}return this._cleanupClosedWindows(),-1!==z(this.keys,e)},n.getOrSet=function(e,n){if(this.has(e))return this.get(e);n=n();return this.set(e,n),n},U);function U(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if("undefined"!=typeof WeakMap&&void 0!==Object.freeze)try{var e=new WeakMap,n={};return Object.freeze(n),e.set(n,"__testvalue__"),"__testvalue__"===e.get(n)}catch(e){return}}())try{this.weakmap=new WeakMap}catch(e){}this.keys=[],this.values=[]}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,n,r){return(q=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,n,r){var t=[null];t.push.apply(t,n);t=new(Function.bind.apply(e,t));return r&&o(t,r.prototype),t}).apply(null,arguments)}function B(e){var r="function"==typeof Map?new Map:void 0;return(B=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return q(e,arguments,L(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,e)})(e)}function J(e){return e.name||e.__name__||e.displayName||"anonymous"}function H(e,n){try{delete e.name,e.name=n}catch(e){}return e.__name__=e.displayName=n,e}function Y(e){if("function"==typeof btoa)return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,n){return String.fromCharCode(parseInt(n,16))})).replace(/[=]/g,"");if("undefined"!=typeof Buffer)return Buffer.from(e,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function Je(){var e="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+Y((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function Z(e){try{return JSON.stringify([].slice.call(e),function(e,n){return"function"==typeof n?"memoize["+function(e){if(F=F||new M,null==e||"object"!=typeof e&&"function"!=typeof e)throw new Error("Invalid object");var n=F.get(e);return n||(n=typeof e+":"+Je(),F.set(e,n)),n}(n)+"]":n})}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}}function G(){return{}}var V=0,X=0;function He(u,e){void 0===e&&(e={});var c,s,n=e.thisNamespace,d=void 0!==n&&n,f=e.time,l=V;V+=1;n=function(){for(var e,n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];l<X&&(s=c=null,l=V,V+=1),e=d?(s=s||new M).getOrSet(this,G):c=c||{};var o=Z(r),i=e[o];if(i&&f&&Date.now()-i.time<f&&(delete e[o],i=null),i)return i.value;var a=Date.now(),i=u.apply(this,arguments);return e[o]={time:a,value:i},i};return n.reset=function(){s=c=null},H(n,(e.name||J(u))+"::memoized")}function Ye(){}function Ze(e){var n=!1;return H(function(){if(!n)return n=!0,e.apply(this,arguments)},J(e)+"::once")}function Ge(e,n){if(void 0===n&&(n=1),3<=n)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if("string"==typeof e)return e;if(e instanceof Error){var r=e&&e.stack,t=e&&e.message;if(r&&t)return-1!==r.indexOf(t)?r:t+"\n"+r;if(r)return r;if(t)return t}return e&&e.toString&&"function"==typeof e.toString?e.toString():{}.toString.call(e)}catch(e){return"Error while stringifying error: "+Ge(e,n+1)}}function Ve(e){return"string"==typeof e?e:e&&e.toString&&"function"==typeof e.toString?e.toString():{}.toString.call(e)}function Xe(e,n){if(!n)return e;if(Object.assign)return Object.assign(e,n);for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e}function $e(n,r){var t;return function e(){t=setTimeout(function(){n(),e()},r)}(),{cancel:function(){clearTimeout(t)}}}function Ke(e){return[].slice.call(e)}function Qe(e){return null!=e}function $(e){return"[object RegExp]"==={}.toString.call(e)}function K(e,n,r){if(e.hasOwnProperty(n))return e[n];r=r();return e[n]=r}function en(r){var t,o=[],i=!1,a={set:function(e,n){return i||(r[e]=n,a.register(function(){delete r[e]})),n},register:function(e){var n=Ze(function(){return e(t)});return i?e(t):o.push(n),{cancel:function(){var e=o.indexOf(n);-1!==e&&o.splice(e,1)}}},all:function(e){t=e;var n=[];for(i=!0;o.length;){var r=o.shift();n.push(r())}return Ae.all(n).then(Ye)}};return a}function Q(e,n){if(null==n)throw new Error("Expected "+e+" to be present");return n}He.clear=function(){X=V},He(function(e){if(Object.values)return Object.values(e);var n,r=[];for(n in e)e.hasOwnProperty(n)&&r.push(e[n]);return r});var ee,n=(t(ne,ee=B(Error)),ne);function ne(e){var n;return(n=ee.call(this,e)||this).name=n.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),n.constructor):n.stack=new Error(e).stack,n}function re(){var e=document.body;if(!e)throw new Error("Body element not found");return e}function te(){return Boolean(document.body)&&"complete"===document.readyState}function oe(){return Boolean(document.body)&&"interactive"===document.readyState}function ie(e){return encodeURIComponent(e)}function ae(o){return function(e){void 0===e&&(e=[]);var n=ae.__inline_memoize_cache__=ae.__inline_memoize_cache__||{},r=Z(e);return n.hasOwnProperty(r)?n[r]:n[r]=function(){var e={};if(!o)return e;if(-1===o.indexOf("="))return e;for(var n=0,r=o.split("&");n<r.length;n++){var t=r[n];(t=t.split("="))[0]&&t[1]&&(e[decodeURIComponent(t[0])]=decodeURIComponent(t[1]))}return e}.apply(void 0,e)}([o])}function nn(e,n){return void 0===n&&(n={}),n&&Object.keys(n).length?(void 0===(r=Ne({},ae(e),n))&&(r={}),Object.keys(r).filter(function(e){return"string"==typeof r[e]||"boolean"==typeof r[e]}).map(function(e){var n=r[e];if("string"!=typeof n&&"boolean"!=typeof n)throw new TypeError("Invalid type for query");return ie(e)+"="+ie(n.toString())}).join("&")):e;var r}function ue(e){return e instanceof window.Element||null!==e&&"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}function rn(e,n){return void 0===n&&(n=document),ue(e)?e:"string"==typeof e?n.querySelector(e):void 0}function tn(i){return new Ae(function(e,n){var r=Ve(i),t=rn(i);if(t)return e(t);if(te())return n(new Error("Document is ready and element "+r+" does not exist"));var o=setInterval(function(){if(t=rn(i))e(t),clearInterval(o);else if(te())return clearInterval(o),n(new Error("Document is ready and element "+r+" does not exist"))},10)})}He(function(){return new Ae(function(e){if(te()||oe())return e();var n=setInterval(function(){if(te()||oe())return clearInterval(n),e()},10)})});var ce,se,on=(t(de,ce=n),de);function de(){return ce.apply(this,arguments)||this}function fe(t){if((se=se||new M).has(t)){var e=se.get(t);if(e)return e}e=new Ae(function(n,r){t.addEventListener("load",function(){!function(e){if(!function(){for(var e=0;e<O.length;e++){var n=!1;try{n=O[e].closed}catch(e){}n&&(C.splice(e,1),O.splice(e,1))}}(),e&&e.contentWindow)try{O.push(e.contentWindow),C.push(e)}catch(e){}}(t),n(t)}),t.addEventListener("error",function(e){t.contentWindow?n(t):r(e)})});return se.set(t,e),e}function an(e){return fe(e).then(function(e){if(!e.contentWindow)throw new Error("Could not find window in iframe");return e.contentWindow})}function un(e,n){void 0===e&&(e={});var r=e.style||{},t=function(e,n){void 0===e&&(e="div"),void 0===n&&(n={}),e=e.toLowerCase();var r,t,o,i=document.createElement(e);if(n.style&&Xe(i.style,n.style),n.class&&(i.className=n.class.join(" ")),n.id&&i.setAttribute("id",n.id),n.attributes)for(var a=0,u=Object.keys(n.attributes);a<u.length;a++){var c=u[a];i.setAttribute(c,n.attributes[c])}if(n.styleSheet&&(r=i,t=n.styleSheet,void 0===o&&(o=window.document),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(o.createTextNode(t))),n.html){if("iframe"===e)throw new Error("Iframe html can not be written unless container provided and iframe in DOM");i.innerHTML=n.html}return i}("iframe",{attributes:Ne({allowTransparency:"true"},e.attributes||{}),style:Ne({backgroundColor:"transparent",border:"none"},r),html:e.html,class:e.class}),r=window.navigator.userAgent.match(/MSIE|Edge/i);return t.hasAttribute("id")||t.setAttribute("id",Je()),fe(t),n&&function(e,n){void 0===n&&(n=document);n=rn(e,n);if(n)return n;throw new Error("Can not find element: "+Ve(e))}(n).appendChild(t),(e.url||r)&&t.setAttribute("src",e.url||"about:blank"),t}function cn(e,n,r){return e.addEventListener(n,r),{cancel:function(){e.removeEventListener(n,r)}}}function sn(e){e.style.setProperty("display","")}function dn(e){e.style.setProperty("display","none","important")}function fn(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ln(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function hn(r,t,e){var n=void 0===e?{}:e,e=n.width,o=void 0===e||e,e=n.height,i=void 0===e||e,e=n.interval,e=void 0===e?100:e,n=n.win,n=void 0===n?window:n,a=r.offsetWidth,u=r.offsetHeight,c=!1;t({width:a,height:u});function s(){var e,n;!c&&Boolean(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&(e=r.offsetWidth,n=r.offsetHeight,(o&&e!==a||i&&n!==u)&&t({width:e,height:n}),a=e,u=n)}var d,f;return n.addEventListener("resize",s),f=void 0!==n.ResizeObserver?((d=new n.ResizeObserver(s)).observe(r),$e(s,10*e)):void 0!==n.MutationObserver?((d=new n.MutationObserver(s)).observe(r,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),$e(s,10*e)):$e(s,e),{cancel:function(){c=!0,d.disconnect(),window.removeEventListener("resize",s),f.cancel()}}}function wn(e){for(;e.parentNode;)e=e.parentNode;return"[object ShadowRoot]"===e.toString()}var le="undefined"!=typeof document?document.currentScript:null,he=He(function(){if(le)return le;if(le=function(){try{var e=function(){try{throw new Error("_")}catch(e){return e.stack||""}}(),e=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e),n=e&&e[1];if(!n)return;for(var r=0,t=[].slice.call(document.getElementsByTagName("script")).reverse();r<t.length;r++){var o=t[r];if(o.src&&o.src===n)return o}}catch(e){}}())return le;throw new Error("Can not determine current script")}),we=Je();function pe(e){return"string"==typeof e&&/^[0-9]+%$/.test(e)}function me(e){if("number"==typeof e)return e;var n=e.match(/^([0-9]+)(px|%)$/);if(!n)throw new Error("Could not match css value from "+e);return parseInt(n[1],10)}function ve(e){return me(e)+"px"}function ye(e){return"number"!=typeof e&&pe(e)?e:ve(e)}function pn(e,n){if("number"==typeof e)return e;if(pe(e))return parseInt(n*me(e)/100,10);if("string"==typeof e&&/^[0-9]+px$/.test(e))return me(e);throw new Error("Can not normalize dimension: "+e)}function ge(e){void 0===e&&(e=window);var n="__post_robot_10_0_44__";return e!==window?e[n]:e[n]=e[n]||{}}He(function(){var e;try{e=he()}catch(e){return we}var n,r=e.getAttribute("data-uid");return r&&"string"==typeof r||(r=e.getAttribute("data-uid-auto"))&&"string"==typeof r||(r=e.src?"uid_"+(n=function(e){for(var n="",r=0;r<e.length;r++){var t=e[r].charCodeAt(0)*r;e[r+1]&&(t+=e[r+1].charCodeAt(0)*(r-1)),n+=String.fromCharCode(97+Math.abs(t)%26)}return n}(JSON.stringify({src:e.src,dataset:e.dataset}))).slice(n.length-30):Je(),e.setAttribute("data-uid-auto",r)),r});var be=function(){return{}};function Ee(e,n){return void 0===e&&(e="store"),void 0===n&&(n=be),K(ge(),e,function(){var r=n();return{has:function(e){return r.hasOwnProperty(e)},get:function(e,n){return r.hasOwnProperty(e)?r[e]:n},set:function(e,n){return r[e]=n},del:function(e){delete r[e]},getOrSet:function(e,n){return K(r,e,n)},reset:function(){r=n()},keys:function(){return Object.keys(r)}}})}var _e=function(){};function xe(){var e=ge();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new _e,e.WINDOW_WILDCARD}function Pe(t,o){return void 0===t&&(t="store"),void 0===o&&(o=be),Ee("windowStore").getOrSet(t,function(){function r(e){return n.getOrSet(e,o)}var n=new M;return{has:function(e){return r(e).hasOwnProperty(t)},get:function(e,n){e=r(e);return e.hasOwnProperty(t)?e[t]:n},set:function(e,n){return r(e)[t]=n},del:function(e){delete r(e)[t]},getOrSet:function(e,n){return K(r(e),t,n)}}})}function Oe(){return Ee("instance").getOrSet("instanceID",Je)}function Ce(e,n){var r=n.domain,t=Pe("helloPromises"),n=t.get(e);n&&n.resolve({domain:r});r=Ae.resolve({domain:r});return t.set(e,r),r}function We(r,e){return(0,e.send)(r,"postrobot_hello",{instanceID:Oe()},{domain:"*",timeout:-1}).then(function(e){var n=e.origin,e=e.data.instanceID;return Ce(r,{domain:n}),{win:r,domain:n,instanceID:e}})}function Se(e,n){var r=n.send;return Pe("windowInstanceIDPromises").getOrSet(e,function(){return We(e,{send:r}).then(function(e){return e.instanceID})})}function De(e,n,r){void 0===n&&(n=5e3),void 0===r&&(r="Window");e=e,e=Pe("helloPromises").getOrSet(e,function(){return new Ae});return-1!==n&&(e=e.timeout(n,new Error(r+" did not load after "+n+"ms"))),e}function mn(e){Pe("knownWindows").set(e,!0)}function vn(e){return"object"==typeof e&&null!==e&&"string"==typeof e.__type__}function yn(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":"function"==typeof e?"function":"object"==typeof e?e instanceof Error?"error":"function"==typeof e.then?"promise":"[object RegExp]"==={}.toString.call(e)?"regex":"[object Date]"==={}.toString.call(e)?"date":"object":"string"==typeof e?"string":"number"==typeof e?"number":"boolean"==typeof e?"boolean":void 0}function gn(e,n){return{__type__:e,__val__:n}}var bn=((n={}).function=function(){},n.error=function(e){return gn("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},n.promise=function(){},n.regex=function(e){return gn("regex",e.source)},n.date=function(e){return gn("date",e.toJSON())},n.array=function(e){return e},n.object=function(e){return e},n.string=function(e){return e},n.number=function(e){return e},n.boolean=function(e){return e},n.null=function(e){return e},n[void 0]=function(e){return gn("undefined",e)},n),En={},_n=((n={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},n.error=function(e){var n=e.stack,r=e.code,t=e.data,e=new Error(e.message);return e.code=r,t&&(e.data=t),e.stack=n+"\n\n"+e.stack,e},n.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},n.regex=function(e){return new RegExp(e)},n.date=function(e){return new Date(e)},n.array=function(e){return e},n.object=function(e){return e},n.string=function(e){return e},n.number=function(e){return e},n.boolean=function(e){return e},n.null=function(e){return e},n[void 0]=function(){},n),xn={};function Pn(){return!!W(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function On(e){return!Fe(window,e)}function Cn(e,n){if(e){if(je()!==Ue(e))return!0}else if(n&&!Re(n))return!0;return!1}function Wn(e){var n=e.win,e=e.domain;return!(!Pn()||e&&!Cn(e,n)||n&&!On(n))}function Sn(e){return"__postrobot_bridge___"+(e=e||Ue(e)).replace(/[^a-zA-Z0-9]+/g,"_")}function Dn(){return Boolean(window.name&&window.name===Sn(je()))}var Nn=new Ae(function(e){if(window.document&&window.document.body)return e(window.document.body);var n=setInterval(function(){if(window.document&&window.document.body)return clearInterval(n),e(window.document.body)},10)});function An(e){Pe("remoteWindowPromises").getOrSet(e,function(){return new Ae})}function jn(e){e=Pe("remoteWindowPromises").get(e);if(!e)throw new Error("Remote window promise not found");return e}function Rn(t,o,i){jn(t).resolve(function(e,n,r){if(e!==t)throw new Error("Remote window does not match window");if(!Me(n,o))throw new Error("Remote domain "+n+" does not match domain "+o);i.fireAndForget(r)})}function Tn(e,n){jn(e).reject(n).catch(Ye)}function kn(e){for(var n=e.win,r=e.name,t=e.domain,o=Ee("popupWindowsByName"),i=Pe("popupWindowsByWin"),a=0,u=o.keys();a<u.length;a++){var c=u[a],s=o.get(c);s&&!ke(s.win)||o.del(c)}if(ke(n))return{win:n,name:r,domain:t};e=i.getOrSet(n,function(){return r?o.getOrSet(r,function(){return{win:n,name:r}}):{win:n}});if(e.win&&e.win!==n)throw new Error("Different window already linked for window: "+(r||"undefined"));return r&&(e.name=r,o.set(r,e)),t&&(e.domain=t,An(n)),i.set(n,e),e}function In(e){var i,a,u,c,s,n,r,o,t=e.on,d=e.send,f=e.receiveMessage,l=window.open;window.open=function(e,n,r,t){t=l.call(this,qe(e),n,r,t);return t&&(kn({win:t,name:n,domain:e?Ue(e):null}),t)},i=(e={on:t,send:d,receiveMessage:f}).on,a=e.send,u=e.receiveMessage,c=Ee("popupWindowsByName"),i("postrobot_open_tunnel",function(e){var n=e.source,t=e.origin,o=e.data,e=Ee("bridges").get(t);if(!e)throw new Error("Can not find bridge promise for domain "+t);return e.then(function(e){if(n!==e)throw new Error("Message source does not matched registered bridge for domain "+t);if(!o.name)throw new Error("Register window expected to be passed window name");if(!o.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!c.has(o.name))throw new Error("Window with name "+o.name+" does not exist, or was not opened by this window");function r(){return c.get(o.name)}if(!r().domain)throw new Error("We do not have a registered domain for window "+o.name);if(r().domain!==t)throw new Error("Message origin "+t+" does not matched registered window origin "+(r().domain||"unknown"));return Rn(r().win,t,o.sendMessage),{sendMessage:function(e){if(window&&!window.closed&&r()){var n=r().domain;if(n)try{u({data:e,origin:n,source:r().win},{on:i,send:a})}catch(e){Ae.reject(e)}}}}})}),s={send:d}.send,ge(window).openTunnelToParent=function(e){var n=e.name,r=e.source,t=e.canary,o=e.sendMessage,i=Ee("tunnelWindows"),e=j(window);if(!e)throw new Error("No parent window found to open tunnel to");var a=function(e){var n=e.name,r=e.source,t=e.canary,o=e.sendMessage;!function(){for(var e=Ee("tunnelWindows"),n=0,r=e.keys();n<r.length;n++){var t=r[n];ke(e[t].source)&&e.del(t)}}();e=Je();return Ee("tunnelWindows").set(e,{name:n,source:r,canary:t,sendMessage:o}),e}({name:n,source:r,canary:t,sendMessage:o});return s(e,"postrobot_open_tunnel",{name:n,sendMessage:function(){var e=i.get(a);if(e&&e.source&&!ke(e.source)){try{e.canary()}catch(e){return}e.sendMessage.apply(this,arguments)}}},{domain:"*"})},n=(f={on:t,send:d,receiveMessage:f}).on,r=f.send,o=f.receiveMessage,Ae.try(function(){var e,t=R(window);if(t&&Wn({win:t}))return An(t),e=t,Pe("remoteBridgeAwaiters").getOrSet(e,function(){return Ae.try(function(){var t=S(e,Sn(je()));if(t)return Re(t)&&ge(Te(t))?t:new Ae(function(e){var n=setInterval(function(){if(t&&Re(t)&&ge(Te(t)))return clearInterval(n),clearTimeout(r),e(t)},100),r=setTimeout(function(){return clearInterval(n),e()},2e3)})})}).then(function(e){return e?window.name?ge(Te(e)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(e){try{window}catch(e){return}if(window&&!window.closed)try{o({data:e,origin:this.origin,source:this.source},{on:n,send:r})}catch(e){Ae.reject(e)}}}).then(function(e){var n=e.source,r=e.origin,e=e.data;if(n!==t)throw new Error("Source does not match opener");Rn(n,r,e.sendMessage)}).catch(function(e){throw Tn(t,e),e}):Tn(t,new Error("Can not register with opener: window does not have a name")):Tn(t,new Error("Can not register with opener: no bridge found in opener"))})})}function zn(){for(var e=Ee("idToProxyWindow"),n=0,r=e.keys();n<r.length;n++){var t=r[n];e.get(t).shouldClean()&&e.del(t)}}function Fn(e,n){var r=n.send,n=n.id,n=void 0===n?Je():n,o=e.then(function(e){if(Re(e))return Te(e).name}),t=e.then(function(e){if(ke(e))throw new Error("Window is closed, can not determine type");return R(e)?p.POPUP:p.IFRAME});o.catch(Ye),t.catch(Ye);function u(){return e.then(function(e){if(!ke(e))return Re(e)?Te(e).name:o})}var a,c;return{id:n,getType:function(){return t},getInstanceID:(a=function(){return e.then(function(e){return Se(e,{send:r})})},c={},i.reset=function(){c={}},H(i,J(a)+"::promiseMemoized")),close:function(){return e.then(Be)},getName:u,focus:function(){return e.then(function(e){e.focus()})},isClosed:function(){return e.then(function(e){return ke(e)})},setLocation:function(i,a){return void 0===a&&(a={}),e.then(function(e){var n=window.location.protocol+"//"+window.location.host,r=a.method,t=void 0===r?"get":r,o=a.body;if(0===i.indexOf("/"))i=n+i;else if(!i.match(/^https?:\/\//)&&0!==i.indexOf(n))throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(i));if("post"===t)return u().then(function(e){if(!e)throw new Error("Can not post to window without target name");!function(e){var n=e.url,r=e.target,t=e.body,e=void 0===(e=e.method)?"post":e,o=document.createElement("form");if(o.setAttribute("target",r),o.setAttribute("method",e),o.setAttribute("action",n),o.style.display="none",t)for(var i=0,a=Object.keys(t);i<a.length;i++){var u=a[i],c=document.createElement("input");c.setAttribute("name",u),c.setAttribute("value",null==(u=t[u])?void 0:u.toString()),o.appendChild(c)}re().appendChild(o),o.submit(),re().removeChild(o)}({url:i,target:e,method:t,body:o})});if("get"!==t)throw new Error("Unsupported method: "+t);if(Re(e))try{if(e.location&&"function"==typeof e.location.replace)return void e.location.replace(i)}catch(e){}e.location=i})},setName:function(t){return e.then(function(e){kn({win:e,name:t});var n=Re(e),r=I(e);if(!n)throw new Error("Can not set name for cross-domain window: "+t);Te(e).name=t,r&&r.setAttribute("name",t),o=Ae.resolve(t)})}};function i(){for(var e=arguments,n=this,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];var i=Z(t);return c.hasOwnProperty(i)||(c[i]=Ae.try(function(){return a.apply(n,e)}).finally(function(){delete c[i]})),c[i]}}var Mn=((n=Un.prototype).getID=function(){return this.serializedWindow.id},n.getType=function(){return this.serializedWindow.getType()},n.isPopup=function(){return this.getType().then(function(e){return e===p.POPUP})},n.setLocation=function(e,n){var r=this;return this.serializedWindow.setLocation(e,n).then(function(){return r})},n.getName=function(){return this.serializedWindow.getName()},n.setName=function(e){var n=this;return this.serializedWindow.setName(e).then(function(){return n})},n.close=function(){var e=this;return this.serializedWindow.close().then(function(){return e})},n.focus=function(){var e=this,n=this.isPopup(),r=this.getName(),n=Ae.hash({isPopup:n,name:r}).then(function(e){var n=e.name;e.isPopup&&n&&window.open("",n)}),r=this.serializedWindow.focus();return Ae.all([n,r]).then(function(){return e})},n.isClosed=function(){return this.serializedWindow.isClosed()},n.getWindow=function(){return this.actualWindow},n.setWindow=function(e,n){n=n.send;this.actualWindow=e,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=Fn(this.actualWindowPromise,{send:n,id:this.getID()}),Pe("winToProxyWindow").set(e,this)},n.awaitWindow=function(){return this.actualWindowPromise},n.matchWindow=function(n,e){var r=this,t=e.send;return Ae.try(function(){return r.actualWindow?n===r.actualWindow:Ae.hash({proxyInstanceID:r.getInstanceID(),knownWindowInstanceID:Se(n,{send:t})}).then(function(e){e=e.proxyInstanceID===e.knownWindowInstanceID;return e&&r.setWindow(n,{send:t}),e})})},n.unwrap=function(){return this.actualWindow||this},n.getInstanceID=function(){return this.serializedWindow.getInstanceID()},n.shouldClean=function(){return Boolean(this.actualWindow&&ke(this.actualWindow))},n.serialize=function(){return this.serializedWindow},Un.unwrap=function(e){return Un.isProxyWindow(e)?e.unwrap():e},Un.serialize=function(e,n){n=n.send;return zn(),Un.toProxyWindow(e,{send:n}).serialize()},Un.deserialize=function(e,n){n=n.send;return zn(),Ee("idToProxyWindow").get(e.id)||new Un({serializedWindow:e,send:n})},Un.isProxyWindow=function(e){return Boolean(e&&!A(e)&&e.isProxyWindow)},Un.toProxyWindow=function(e,n){n=n.send;if(zn(),Un.isProxyWindow(e))return e;return Pe("winToProxyWindow").get(e)||new Un({win:e,send:n})},Un);function Un(e){var n=e.send,r=e.win,e=e.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new Ae,this.serializedWindow=e||Fn(this.actualWindowPromise,{send:n}),Ee("idToProxyWindow").set(this.getID(),this),r&&this.setWindow(r,{send:n})}function Ln(e,n,r,t,o){var i=Pe("methodStore"),a=Ee("proxyWindowMethods");Mn.isProxyWindow(t)?a.set(e,{val:n,name:r,domain:o,source:t}):(a.del(e),i.getOrSet(t,function(){return{}})[e]={domain:o,name:r,val:n,source:t})}function qn(e,n){var r=Pe("methodStore"),t=Ee("proxyWindowMethods");return r.getOrSet(e,function(){return{}})[n]||t.get(n)}function Bn(e,n,r,t,o){var i=(o={on:o.on,send:o.send}).on,d=o.send;Ee("builtinListeners").getOrSet("functionCalls",function(){return i("postrobot_method",{domain:"*"},function(e){var n=e.source,r=e.origin,t=e.data,o=t.id,i=t.name,a=qn(n,o);if(!a)throw new Error("Could not find method '"+i+"' with id: "+t.id+" in "+je(window));var u=a.source,c=a.domain,s=a.val;return Ae.try(function(){if(!Me(c,r))throw new Error("Method '"+t.name+"' domain "+JSON.stringify($(a.domain)?a.domain.source:a.domain)+" does not match origin "+r+" in "+je(window));if(Mn.isProxyWindow(u))return u.matchWindow(n,{send:d}).then(function(e){if(!e)throw new Error("Method call '"+t.name+"' failed - proxy window does not match source in "+je(window))})}).then(function(){return s.apply({source:n,origin:r},t.args)},function(n){return Ae.try(function(){if(s.onError)return s.onError(n)}).then(function(){var e;throw n.stack&&(n.stack="Remote call to "+i+"("+(void 0===(e=t.args)&&(e=[]),Ke(e).map(function(e){return"string"==typeof e?"'"+e+"'":void 0===e?"undefined":null===e?"null":"boolean"==typeof e?e.toString():Array.isArray(e)?"[ ... ]":"object"==typeof e?"{ ... }":"function"==typeof e?"() => { ... }":"<"+typeof e+">"}).join(", "))+") failed\n\n"+n.stack),n})}).then(function(e){return{result:e,id:o,name:i}})})});var a=r.__id__||Je();e=Mn.unwrap(e);var u=r.__name__||r.name||t;return"string"==typeof u&&"function"==typeof u.indexOf&&0===u.indexOf("anonymous::")&&(u=u.replace("anonymous::",t+"::")),Mn.isProxyWindow(e)?(Ln(a,r,u,e,n),e.awaitWindow().then(function(e){Ln(a,r,u,e,n)})):Ln(a,r,u,e,n),gn("cross_domain_function",{id:a,name:u})}function Jn(t,o,e,n){var i=n.on,a=n.send;return function(e,t){void 0===t&&(t=En);e=JSON.stringify(e,function(e){var n=this[e];if(vn(this))return n;var r=yn(n);if(!r)return n;r=t[r]||bn[r];return r?r(n,e):n});return void 0===e?"undefined":e}(e,((e={}).promise=function(e,n){return r=e,gn("cross_domain_zalgo_promise",{then:Bn(t,o,function(e,n){return r.then(e,n)},n,{on:(n={on:i,send:a}).on,send:n.send})});var r},e.function=function(e,n){return Bn(t,o,e,n,{on:i,send:a})},e.object=function(e){return A(e)||Mn.isProxyWindow(e)?gn("cross_domain_window",Mn.serialize(e,{send:a})):e},e))}function Hn(t,o,e,n){var d=n.send;return function(e,t){if(void 0===t&&(t=xn),"undefined"!==e)return JSON.parse(e,function(e,n){if(vn(this))return n;n=vn(n)?(r=n.__type__,n.__val__):(r=yn(n),n);if(!r)return n;var r=t[r]||_n[r];return r?r(n,e):n})}(e,((e={}).cross_domain_zalgo_promise=function(e){return new Ae(e.then)},e.cross_domain_function=function(e){return i=t,a=o,r={send:d},u=e.id,c=e.name,s=r.send,(r=n()).fireAndForget=n({fireAndForget:!0}),r;function n(t){function o(){var r=arguments;return Mn.toProxyWindow(i,{send:s}).awaitWindow().then(function(e){var n=qn(e,u);if(n&&n.val!==o)return n.val.apply({source:window,origin:je()},r);n=[].slice.call(r);return t.fireAndForget?s(e,"postrobot_method",{id:u,name:c,args:n},{domain:a,fireAndForget:!0}):s(e,"postrobot_method",{id:u,name:c,args:n},{domain:a,fireAndForget:!1}).then(function(e){return e.data.result})}).catch(function(e){throw e})}return void 0===t&&(t={}),o.__name__=c,o.__origin__=a,o.__source__=i,o.__id__=u,o.origin=a,o}var i,a,r,u,c,s},e.cross_domain_window=function(e){return Mn.deserialize(e,{send:d})},e))}var Yn={};function Zn(u,c,e,n){var s=n.on,d=n.send;return Ae.try(function(){var a=Pe().getOrSet(u,function(){return{}});return a.buffer=a.buffer||[],a.buffer.push(e),a.flush=a.flush||Ae.flush().then(function(){if(ke(u))throw new Error("Window is closed");var e,n=Jn(u,c,((e={}).__post_robot_10_0_44__=a.buffer||[],e),{on:s,send:d});delete a.buffer;for(var r=Object.keys(Yn),t=[],o=0;o<r.length;o++){var i=r[o];try{Yn[i](u,n,c)}catch(e){t.push(e)}}if(t.length===r.length)throw new Error("All post-robot messaging strategies failed:\n\n"+t.map(function(e,n){return n+". "+Ge(e)}).join("\n\n"))}),a.flush.then(function(){delete a.flush})}).then(Ye)}function Gn(e){return Ee("responseListeners").get(e)}function Vn(e){Ee("responseListeners").del(e)}function Xn(e){return Ee("erroredResponseListeners").has(e)}function $n(e){var n=e.name,r=e.win,t=e.domain,o=Pe("requestListeners");if("*"===r&&(r=null),"*"===t&&(t=null),!n)throw new Error("Name required to get request listener");for(var i=0,a=[r,xe()];i<a.length;i++){var u=a[i];if(u){u=o.get(u);if(u){u=u[n];if(u){if(t&&"string"==typeof t){if(u[t])return u[t];if(u.__domain_regex__)for(var c=0,s=u.__domain_regex__;c<s.length;c++){var d=s[c],f=d.listener;if(Me(d.regex,t))return f}}if(u["*"])return u["*"]}}}}}function Kn(e,n){var r=n.on,t=n.send,o=Ee("receivedMessages");try{if(!window||window.closed||!e.source)return}catch(e){return}var i=e.source,a=e.origin,u=function(e,n,r,t){var o,i=t.on,a=t.send;try{o=Hn(n,r,e,{on:i,send:a})}catch(e){return}if(o&&"object"==typeof o&&null!==o){t=o.__post_robot_10_0_44__;if(Array.isArray(t))return t}}(e.data,i,a,{on:r,send:t});if(u){mn(i);for(var c=0;c<u.length;c++){var s=u[c];if(o.has(s.id))return;if(o.set(s.id,!0),ke(i)&&!s.fireAndForget)return;0===s.origin.indexOf("file:")&&(a="file://");try{"postrobot_message_request"===s.type?function(t,o,i,e){var a=e.on,u=e.send,n=$n({name:i.name,win:t,domain:o}),c="postrobot_method"===i.name&&i.data&&"string"==typeof i.data.name?i.data.name+"()":i.name;function r(e,n,r){return Ae.flush().then(function(){if(!i.fireAndForget&&!ke(t))try{return Zn(t,o,{id:Je(),origin:je(window),type:"postrobot_message_response",hash:i.hash,name:i.name,ack:e,data:n,error:r},{on:a,send:u})}catch(e){throw new Error("Send response message failed for "+c+" in "+je()+"\n\n"+Ge(e))}})}Ae.all([Ae.flush().then(function(){if(!i.fireAndForget&&!ke(t))try{return Zn(t,o,{id:Je(),origin:je(window),type:"postrobot_message_ack",hash:i.hash,name:i.name},{on:a,send:u})}catch(e){throw new Error("Send ack message failed for "+c+" in "+je()+"\n\n"+Ge(e))}}),Ae.try(function(){if(!n)throw new Error("No handler found for post message: "+i.name+" from "+o+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Me(n.domain,o))throw new Error("Request origin "+o+" does not match domain "+n.domain.toString());return n.handler({source:t,origin:o,data:i.data})}).then(function(e){return r("success",e)},function(e){return r("error",null,e)})]).then(Ye).catch(function(e){if(n&&n.handleError)return n.handleError(e);throw e})}(i,a,s,{on:r,send:t}):"postrobot_message_response"===s.type?function(e,n,r){if(!Xn(r.hash)){var t,o=Gn(r.hash);if(!o)throw new Error("No handler found for post message response for message: "+r.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Me(o.domain,n))throw new Error("Response origin "+n+" does not match domain "+(t=o.domain,Array.isArray(t)?"("+t.join(" | ")+")":w(t)?"RegExp("+t.toString()+")":t.toString()));if(e!==o.win)throw new Error("Response source does not match registered window");Vn(r.hash),"error"===r.ack?o.promise.reject(r.error):"success"===r.ack&&o.promise.resolve({source:e,origin:n,data:r.data})}}(i,a,s):"postrobot_message_ack"===s.type&&function(e,n,r){if(!Xn(r.hash)){var t=Gn(r.hash);if(!t)throw new Error("No handler found for post message ack for message: "+r.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!Me(t.domain,n))throw new Error("Ack origin "+n+" does not match domain "+t.domain.toString());if(e!==t.win)throw new Error("Ack source does not match registered window")}catch(e){t.promise.reject(e)}t.ack=!0}}(i,a,s)}catch(e){setTimeout(function(){throw e},0)}}}}function Qn(e,n,r){if(!e)throw new Error("Expected name");if("function"==typeof(n=n||{})&&(r=n,n={}),!r)throw new Error("Expected handler");(n=n||{}).name=e,n.handler=r||n.handler;var t=n.window,r=n.domain,o=function e(n,r){var t=n.name,o=n.win,i=n.domain,a=Pe("requestListeners");if(!t||"string"!=typeof t)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var u=[],c=0,s=o;c<s.length;c++)u.push(e({name:t,domain:i,win:s[c]},r));return{cancel:function(){for(var e=0;e<u.length;e++)u[e].cancel()}}}if(Array.isArray(i)){for(var d=[],f=0,l=i;f<l.length;f++)d.push(e({name:t,win:o,domain:l[f]},r));return{cancel:function(){for(var e=0;e<d.length;e++)d[e].cancel()}}}n=$n({name:t,win:o,domain:i});if(o&&"*"!==o||(o=xe()),i=i||"*",n)throw o&&i?new Error("Request listener already exists for "+t+" on domain "+i.toString()+" for "+(o===xe()?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+t+" for "+(o===xe()?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+t+" on domain "+i.toString()):new Error("Request listener already exists for "+t);var h,w,p=a.getOrSet(o,function(){return{}}),m=K(p,t,function(){return{}}),v=i.toString();return $(i)?(h=K(m,"__domain_regex__",function(){return[]})).push(w={regex:i,listener:r}):m[v]=r,{cancel:function(){delete m[v],w&&(h.splice(h.indexOf(w,1)),h.length||delete m.__domain_regex__),Object.keys(m).length||delete p[t],o&&!Object.keys(p).length&&a.del(o)}}}({name:e,win:t,domain:r},{handler:n.handler,handleError:n.errorHandler||function(e){throw e},window:t,domain:r||"*",name:e});return{cancel:function(){o.cancel()}}}Yn.postrobot_post_message=function(e,n,r){0===r.indexOf("file:")&&(r="*"),e.postMessage(n,r)},Yn.postrobot_bridge=function(e,n,r){if(!Pn()&&!Dn())throw new Error("Bridge not needed for browser");if(Re(e))throw new Error("Post message through bridge disabled between same domain windows");if(!1!==Fe(window,e))throw new Error("Can only use bridge to communicate between two different windows, not between frames");!function(n,r,t){var e=D(window,n),o=D(n,window);if(!e&&!o)throw new Error("Can only send messages to and from parent and popup windows");jn(n).then(function(e){return e(n,r,t)})}(e,r,n)},Yn.postrobot_global=function(e,n){if(!W(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!Re(e))throw new Error("Post message through global disabled between different domain windows");if(!1!==Fe(window,e))throw new Error("Can only use global to communicate between two different windows, not between frames");e=ge(e);if(!e)throw new Error("Can not find postRobot global on foreign window");e.receiveMessage({source:window,origin:je(),data:n})};var er,nr=function h(w,p,m,e){var i=(e=e||{}).domain||"*",v=e.timeout||-1,n=e.timeout||5e3,y=e.fireAndForget||!1;return Ae.try(function(){if(!function(e,n,r){if(!e)throw new Error("Expected name");if(r&&"string"!=typeof r&&!Array.isArray(r)&&!$(r))throw new TypeError("Can not send "+e+". Expected domain "+JSON.stringify(r)+" to be a string, array, or regex");if(ke(n))throw new Error("Can not send "+e+". Target window is closed")}(p,w,i),function(e,n){var r=Ie(n);if(r)return r===e;if(n!==e&&T(n)!==n)for(var t=0,o=x(e);t<o.length;t++)if(o[t]===n)return 1}(window,w))return De(w,n)}).then(function(e){return n=w,r=i,t=(void 0===e?{}:e).domain,o={send:h}.send,Ae.try(function(){return"string"==typeof r?r:Ae.try(function(){return t||We(n,{send:o}).then(function(e){return e.domain})}).then(function(e){if(!Me(r,r))throw new Error("Domain "+Ve(r)+" does not match "+Ve(r));return e})});var n,r,t,o}).then(function(e){var n,r,t,o,i,a,u,c,s=e,d="postrobot_method"===p&&m&&"string"==typeof m.name?m.name+"()":p,f=new Ae,l=p+"_"+Je();return y||(c=l,e=n={name:p,win:w,domain:s,promise:f},Ee("responseListeners").set(c,e),(r=Pe("requestPromises").getOrSet(w,function(){return[]})).push(f),f.catch(function(){var e;e=l,Ee("erroredResponseListeners").set(e,!0),Vn(l)}),e=w,t=Pe("knownWindows").get(e,!1)?1e4:2e3,i=t,a=o=v,u=$e(function(){return ke(w)?f.reject(new Error("Window closed for "+p+" before "+(n.ack?"response":"ack"))):n.cancelled?f.reject(new Error("Response listener was cancelled for "+p)):(i=Math.max(i-500,0),-1!==a&&(a=Math.max(a-500,0)),n.ack||0!==i?0===a&&f.reject(new Error("No response for postMessage "+d+" in "+je()+" in "+o+"ms")):f.reject(new Error("No ack for postMessage "+d+" in "+je()+" in "+t+"ms")))},500),f.finally(function(){u.cancel(),r.splice(r.indexOf(f,1))}).catch(Ye)),Zn(w,s,{id:Je(),origin:je(window),type:"postrobot_message_request",hash:l,name:p,data:m,fireAndForget:y},{on:Qn,send:h}).then(function(){return y?f.resolve():f},function(e){throw new Error("Send request message failed for "+d+" in "+je()+"\n\n"+Ge(e))})})};function rr(e){return Mn.toProxyWindow(e,{send:nr})}function tr(e){for(var n=0,r=Pe("requestPromises").get(e,[]);n<r.length;n++)r[n].reject(new Error("Window "+(ke(e)?"closed":"cleaned up")+" before response")).catch(Ye)}function or(e){if(!Re(e))throw new Error("Can not get global for window on different domain");return e.__zoid_9_0_86__||(e.__zoid_9_0_86__={}),e.__zoid_9_0_86__}function ir(e,n){try{return n(or(e))}catch(e){}}function ar(n){return{get:function(){var e=this;return Ae.try(function(){if(e.source&&e.source!==window)throw new Error("Can not call get on proxy object from a remote window");return n})}}}function ur(e){e=or(e);return e.references=e.references||{},e.references}function cr(e){var n=e.data,r=e.metaData,t=e.sender,o=e.receiver,i=e.passByReference,a=void 0!==i&&i,i=e.basic,e=void 0!==i&&i,i=rr(o.win),o=e?JSON.stringify(n):Jn(i,o.domain,n,{on:Qn,send:nr}),u=a?(n=o,a=Je(),ur(window)[a]=n,{type:"uid",uid:a}):{type:"raw",val:o};return{serializedData:(r={sender:{domain:t.domain},metaData:r,reference:u},Y(JSON.stringify(r))),cleanReference:function(){var e,n=window;"uid"===(e=u).type&&delete ur(n)[e.uid]}}}function sr(e){var n=e.sender,r=e.basic,t=void 0!==r&&r,r=(o=e.data,JSON.parse(function(e){if("function"==typeof atob)return decodeURIComponent([].map.call(atob(e),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));if("undefined"!=typeof Buffer)return Buffer.from(e,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(o))),e=r.reference,o=r.metaData,i="function"==typeof n.win?n.win({metaData:o}):n.win,n="function"==typeof n.domain?n.domain({metaData:o}):("string"==typeof n.domain?n:r.sender).domain,r=function(e){if("raw"===e.type)return e.val;if("uid"===e.type)return ur(i)[e.uid];throw new Error("Unsupported ref type: "+e.type)}(e);return{data:t?JSON.parse(r):Hn(i,n,r,{on:Qn,send:nr}),metaData:o,sender:{win:i,domain:n},reference:e}}er={setupBridge:In,openBridge:function(o,i){var e=Ee("bridges"),a=Ee("bridgeFrames");return i=i||Ue(o),e.getOrSet(i,function(){return Ae.try(function(){if(je()===i)throw new Error("Can not open bridge on the same domain as current domain: "+i);var e=Sn(i);if(S(window,e))throw new Error("Frame with name "+e+" already exists on page");var n,r,t=(n=e,r=o,(e=document.createElement("iframe")).setAttribute("name",n),e.setAttribute("id",n),e.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),e.setAttribute("frameborder","0"),e.setAttribute("border","0"),e.setAttribute("scrolling","no"),e.setAttribute("allowTransparency","true"),e.setAttribute("tabindex","-1"),e.setAttribute("hidden","true"),e.setAttribute("title",""),e.setAttribute("role","presentation"),e.src=r,e);return a.set(i,t),Nn.then(function(e){e.appendChild(t);var n=t.contentWindow;return new Ae(function(e,n){t.addEventListener("load",e),t.addEventListener("error",n)}).then(function(){return De(n,5e3,"Bridge "+o)}).then(function(){return n})})})})},linkWindow:kn,linkUrl:function(e,n){kn({win:e,domain:Ue(n)})},isBridge:Dn,needsBridge:Wn,needsBridgeForBrowser:Pn,hasBridge:function(e,n){return Ee("bridges").has(n||Ue(e))},needsBridgeForWin:On,needsBridgeForDomain:Cn,destroyBridges:function(){for(var e=Ee("bridges"),n=Ee("bridgeFrames"),r=0,t=n.keys();r<t.length;r++){var o=n.get(t[r]);o&&o.parentNode&&o.parentNode.removeChild(o)}n.reset(),e.reset()}};var dr={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},fr={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},lr=p,hr={RENDER:"zoid-render",RENDERED:"zoid-rendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function wr(e){return"__zoid__"+e.name+"__"+e.serializedPayload+"__"}function pr(e){if(!e)throw new Error("No window name");var n=e.split("__"),r=n[1],e=n[2],n=n[3];if("zoid"!==r)throw new Error("Window not rendered by zoid - got "+r);if(!e)throw new Error("Expected component name");if(!n)throw new Error("Expected serialized payload ref");return{name:e,serializedInitialPayload:n}}var mr=He(function(e){e=sr({data:pr(e).serializedInitialPayload,sender:{win:function(e){return function(i){if("opener"===i.type)return Q("opener",R(window));if("parent"===i.type&&"number"==typeof i.distance)return Q("parent",(e=window,void 0===(r=i.distance)&&(r=1),function(e,n){void 0===n&&(n=1);for(var r=e,t=0;t<n;t++){if(!r)return;r=j(r)}return r}(e,ze(e)-r)));var e;if("global"===i.type&&i.uid&&"string"==typeof i.uid){var n=function(){var n=i.uid,e=Ie(window);if(!e)throw new Error("Can not find ancestor window");for(var r=0,t=k(e);r<t.length;r++){var o=t[r];if(Re(o)){o=ir(o,function(e){return e.windows&&e.windows[n]});if(o)return{v:o}}}}();if("object"==typeof n)return n.v}else if("name"===i.type){var r=i.name;return Q("namedWindow",S(n=Q("ancestor",Ie(window)),r=r)||function e(n,r){var t=S(n,r);if(t)return t;for(var o=0,i=x(n);o<i.length;o++){var a=e(i[o],r);if(a)return a}}(T(n)||n,r))}throw new Error("Unable to find "+i.type+" parent component window")}(e.metaData.windowRef)}}});return{parent:e.sender,payload:e.data,reference:e.reference}});function vr(){return mr(window.name)}function yr(e,n,r,t,o){if(!e.hasOwnProperty(r))return t;r=e[r];return"function"==typeof r.childDecorate?r.childDecorate({value:t,uid:o.uid,tag:o.tag,close:o.close,focus:o.focus,onError:o.onError,onProps:o.onProps,resize:o.resize,getParent:o.getParent,getParentDomain:o.getParentDomain,show:o.show,hide:o.hide,export:o.export,getSiblings:o.getSiblings}):t}function gr(){return Ae.try(function(){window.focus()})}function br(){return Ae.try(function(){window.close()})}function Er(){return Ye}function _r(e){return Ze(e.value)}function xr(e,n,r){for(var t=0,o=Object.keys(Ne({},e,n));t<o.length;t++){var i=o[t];r(i,n[i],e[i])}}function Pr(e,n,o){var i,c={};return Ae.all((i=[],xr(n,e,function(e,n,r){var a,u,t,r=(a=e,u=n,t=r,Ae.resolve().then(function(){var e;if(null!=t&&u){var n=((e={}).get=u.queryParam,e.post=u.bodyParam,e[o]),r=((e={}).get=u.queryValue,e.post=u.bodyValue,e[o]);if(n)return Ae.hash({finalParam:Ae.try(function(){return"function"==typeof n?n({value:t}):"string"==typeof n?n:a}),finalValue:Ae.try(function(){return"function"==typeof r&&Qe(t)?r({value:t}):t})}).then(function(e){var n,r=e.finalParam,e=e.finalValue;if("boolean"==typeof e)n=e.toString();else if("string"==typeof e)n=e.toString();else if("object"==typeof e&&null!==e){if(u.serialization===fr.JSON)n=JSON.stringify(e);else if(u.serialization===fr.BASE64)n=Y(JSON.stringify(e));else if(u.serialization===fr.DOTIFY||!u.serialization){n=function e(n,r,t){for(var o in void 0===r&&(r=""),void 0===t&&(t={}),r=r&&r+".",n)n.hasOwnProperty(o)&&null!=n[o]&&"function"!=typeof n[o]&&(n[o]&&Array.isArray(n[o])&&n[o].length&&n[o].every(function(e){return"object"!=typeof e})?t[""+r+o+"[]"]=n[o].join(","):n[o]&&"object"==typeof n[o]?t=e(n[o],""+r+o,t):t[""+r+o]=n[o].toString());return t}(e,a);for(var t=0,o=Object.keys(n);t<o.length;t++){var i=o[t];c[i]=n[i]}return}}else"number"==typeof e&&(n=e.toString());c[r]=n})}}));i.push(r)}),i)).then(function(){return c})}function Or(e){function a(){return"function"==typeof y?y({props:ae}):y}function S(){return Ae.try(function(){return l.resolveInitPromise?l.resolveInitPromise():te.resolve()})}function D(e){return Ae.try(function(){return l.rejectInitPromise?l.rejectInitPromise(e):te.reject(e)})}function N(e){for(var n={},r=0,t=Object.keys(ae);r<t.length;r++){var o=t[r],i=Q[o];i&&!1===i.sendToChild||i&&i.sameDomain&&!Me(e,je(window))||(n[o]=ae[o])}return Ae.hash(n)}function A(){return Ae.try(function(){return ge?ge():O})}function j(e){return Ae.try(function(){return be?be(e):O=Ne({},O,e)})}function R(){return fe?fe():Ae.try(function(){var e=ae.window;if(e){var n=rr(e);return oe.register(function(){return e.close()}),n}return new Mn({send:nr})})}function T(e){return le?le(e):Ae.try(function(){X=e})}function k(){return ce?ce():Ae.hash({setState:j({visible:!0}),showElement:s?s.get().then(sn):null}).then(Ye)}function I(){return se?se():Ae.hash({setState:j({visible:!1}),showElement:s?s.get().then(dn):null}).then(Ye)}function z(){return"function"==typeof b?b({props:ae}):b}function u(){return"function"==typeof v?v({props:ae}):v}function F(){return Ue(z())}function M(e,n){var r=n.windowName;return he?he(e,{windowName:r}):Ae.try(function(){if(e===lr.IFRAME)return ar(un({attributes:Ne({name:r,title:ne},u().iframe)}))})}function U(e){return we?we(e):Ae.try(function(){if(e===lr.IFRAME)return ar(un({attributes:Ne({name:"__zoid_prerender_frame__"+ne+"_"+Je()+"__",title:"prerender__"+ne},u().iframe)}))})}function L(e,n,r){return ve?ve(e,n,r):Ae.try(function(){if(e===lr.IFRAME){if(!r)throw new Error("Expected proxy frame to be passed");return r.get().then(function(e){return oe.register(function(){return fn(e)}),an(e).then(Te).then(rr)})}if(e===lr.POPUP)return n;throw new Error("No render context available for "+e)})}function r(){return Ae.try(function(){if(X)return Ae.all([ie.trigger(hr.FOCUS),X.focus()]).then(Ye)})}function q(e,n,r,t){if(n===je(window))return{type:"global",uid:((o=or(window)).windows=o.windows||{},o.windows[$]=window,oe.register(function(){delete o.windows[$]}),$)};var o;if(e!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(ae.window){t=t.getWindow();if(!t)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(Ie(t)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if(r===lr.POPUP)return{type:"opener"};if(r===lr.IFRAME)return{type:"parent",distance:ze(window)};throw new Error("Can not construct window reference for child")}function B(e,n){return Ae.try(function(){f=e,d=n,S(),oe.register(function(){return n.close.fireAndForget().catch(Ye)})})}function J(e){var n=e.width,r=e.height;return Ae.try(function(){ie.trigger(hr.RESIZE,{width:n,height:r})})}function t(e){return Ae.try(function(){return ie.trigger(hr.DESTROY)}).catch(Ye).then(function(){return oe.all(e)}).then(function(){te.asyncReject(e||new Error("Component destroyed"))})}function H(t,e){var n=e.proxyWin,o=e.proxyFrame,i=e.windowName;return me?me(t,{proxyWin:n,proxyFrame:o,windowName:i}):Ae.try(function(){if(t===lr.IFRAME){if(!o)throw new Error("Expected proxy frame to be passed");return o.get().then(function(n){return an(n).then(function(e){return oe.register(function(){return fn(n)}),oe.register(function(){return tr(e)}),e})})}if(t!==lr.POPUP)throw new Error("No render context available for "+t);var e=a(),n=e.width,n=void 0===n?"300px":n,e=e.height,e=void 0===e?"150px":e,n=pn(n,window.outerWidth),e=pn(e,window.outerWidth),r=function(n){var e=(n=n||{}).closeOnUnload,r=void 0===e?1:e,t=n.name,o=void 0===t?"":t,i=n.width,a=n.height,e=0,t=0;i&&(window.outerWidth?t=Math.round((window.outerWidth-i)/2)+window.screenX:window.screen.width&&(t=Math.round((window.screen.width-i)/2))),a&&(window.outerHeight?e=Math.round((window.outerHeight-a)/2)+window.screenY:window.screen.height&&(e=Math.round((window.screen.height-a)/2))),delete n.closeOnUnload,delete n.name,i&&a&&(n=Ne({top:e,left:t,width:i,height:a,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},n));var u,c=Object.keys(n).map(function(e){if(null!=n[e])return e+"="+Ve(n[e])}).filter(Boolean).join(",");try{u=window.open("",o,c)}catch(e){throw new on("Can not open popup window - "+(e.stack||e.message))}if(ke(u))throw new on("Can not open popup window - blocked");return r&&window.addEventListener("unload",function(){return u.close()}),u}(Ne({name:i,width:n,height:e},u().popup));return oe.register(function(){return Be(r)}),oe.register(function(){return tr(r)}),r}).then(function(e){return n.setWindow(e,{send:nr}),n.setName(i).then(function(){return n})})}function Y(){return Ae.try(function(){var e=cn(window,"unload",Ze(function(){t(new Error("Window navigated away"))})),n=Le(w,t,3e3);if(oe.register(n.cancel),oe.register(e.cancel),ye)return ye()})}function Z(n){var r=!1;return n.isClosed().then(function(e){return e?(r=!0,Ee(new Error("Detected component window close"))):Ae.delay(200).then(function(){return n.isClosed()}).then(function(e){if(e)return r=!0,Ee(new Error("Detected component window close"))})}).then(function(){return r})}function G(e){return C?C(e):Ae.try(function(){if(-1===_.indexOf(e))return _.push(e),te.asyncReject(e),ie.trigger(hr.ERROR,e)})}function V(e){return Ae.try(function(){_e.resolve(e)})}var o,c,i,X,s,d,f,h,$=e.uid,K=e.options,n=e.overrides,l=void 0===n?{}:n,e=e.parentWin,w=void 0===e?window:e,Q=K.propsDef,p=K.containerTemplate,m=K.prerenderTemplate,ee=K.tag,ne=K.name,v=K.attributes,y=K.dimensions,g=K.autoResize,b=K.url,re=K.domain,E=K.exports,te=new Ae,_=[],oe=en(),x={},P={},O={visible:!0},ie=l.event||(o={},c={},i={on:function(e,n){var r=c[e]=c[e]||[];r.push(n);var t=!1;return{cancel:function(){t||(t=!0,r.splice(r.indexOf(n),1))}}},once:function(e,n){var r=i.on(e,function(){r.cancel(),n()});return r},trigger:function(e){for(var n=arguments.length,r=new Array(1<n?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];var o=c[e],i=[];if(o)for(var a=0;a<o.length;a++)!function(){var e=o[a];i.push(Ae.try(function(){return e.apply(void 0,r)}))}();return Ae.all(i).then(Ye)},triggerOnce:function(e){if(o[e])return Ae.resolve();o[e]=!0;for(var n=arguments.length,r=new Array(1<n?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];return i.trigger.apply(i,[e].concat(r))},reset:function(){c={}}}),ae=l.props||{},C=l.onError,ue=l.getProxyContainer,ce=l.show,se=l.hide,W=l.close,de=l.renderContainer,fe=l.getProxyWindow,le=l.setProxyWin,he=l.openFrame,we=l.openPrerenderFrame,pe=l.prerender,me=l.open,ve=l.openPrerender,ye=l.watchForUnload,ge=l.getInternalState,be=l.setInternalState,Ee=He(function(e){return Ae.try(function(){return W?ke(W.__source__)?void 0:W():Ae.try(function(){return ie.trigger(hr.CLOSE)}).then(function(){return t(e||new Error("Component closed"))})})}),_e=new Ae;B.onError=G;function xe(e,n){return e({uid:$,container:n.container,context:n.context,doc:n.doc,frame:n.frame,prerenderFrame:n.prerenderFrame,focus:r,close:Ee,state:x,props:ae,tag:ee,dimensions:a(),event:ie})}function Pe(i,e){var a=e.context;return pe?pe(i,{context:a}):Ae.try(function(){if(m){var e=i.getWindow();if(e&&Re(e)&&function(e){try{if(!e.location.href)return 1;if("about:blank"===e.location.href)return 1}catch(e){}}(e)){var n=(e=Te(e)).document,r=xe(m,{context:a,doc:n});if(r){if(r.ownerDocument!==n)throw new Error("Expected prerender template to have been created with document from child window");!function(e,n){var r=n.tagName.toLowerCase();if("html"!==r)throw new Error("Expected element to be html, got "+r);for(var t=e.document.documentElement,o=0,i=Ke(t.children);o<i.length;o++)t.removeChild(i[o]);for(var a=0,u=Ke(n.children);a<u.length;a++)t.appendChild(u[a])}(e,r);var r=g.width,t=void 0!==r&&r,r=g.height,o=void 0!==r&&r,r=g.element,r=void 0===r?"body":r;(r=rn(r,n))&&(t||o)&&(e=hn(r,function(e){J({width:t?e.width:void 0,height:o?e.height:void 0})},{width:t,height:o,win:e}),ie.on(hr.RENDERED,e.cancel))}}}})}function Oe(e,n){var r=n.proxyFrame,t=n.proxyPrerenderFrame,i=n.context,a=n.rerender;return de?de(e,{proxyFrame:r,proxyPrerenderFrame:t,context:i,rerender:a}):Ae.hash({container:e.get(),frame:r?r.get():null,prerenderFrame:t?t.get():null,internalState:A()}).then(function(e){var n=e.container,r=e.internalState.visible,t=xe(p,{context:i,container:n,frame:e.frame,prerenderFrame:e.prerenderFrame,doc:document});if(t){r||dn(t),r=t,n.appendChild(r);var o=function(e,n){n=Ze(n);function r(){a=!0;for(var e=0;e<u.length;e++)u[e].disconnect();t&&t.cancel(),i&&i.removeEventListener("unload",c),o&&fn(o)}var t,o,i,a=!1,u=[],c=function(){a||(n(),r())};if(ln(e))return c(),{cancel:r};if(window.MutationObserver)for(var s=e.parentElement;s;){var d=new window.MutationObserver(function(){ln(e)&&c()});d.observe(s,{childList:!0}),u.push(d),s=s.parentElement}return(o=document.createElement("iframe")).setAttribute("name","__detect_close_"+Je()+"__"),o.style.display="none",an(o).then(function(e){(i=Te(e)).addEventListener("unload",c)}),e.appendChild(o),t=$e(function(){ln(e)&&c()},1e3),{cancel:r}}(t,function(){var e=new Error("Detected container element removed from DOM");return Ae.delay(1).then(function(){return ln(t)?void Ee(e):(oe.all(e),a().then(S,D))})});return oe.register(function(){return o.cancel()}),oe.register(function(){return fn(t)}),s=ar(t)}})}function Ce(){return{state:x,event:ie,close:Ee,focus:r,resize:J,onError:G,updateProps:De,show:k,hide:I}}function We(e){void 0===e&&(e={});var i,a,u,c,s,d,f,l,n=h,r=Ce();Xe(P,e),e=Q,i=ae,a=P,u=n,c=r.state,s=r.close,d=r.focus,f=r.event,l=r.onError,xr(a,e,function(n,r,t){var e=!1,o=t;Object.defineProperty(i,n,{configurable:!0,enumerable:!0,get:function(){return e?o:(e=!0,function(){if(!r)return o;var e=r.alias;if(e&&!Qe(t)&&Qe(a[e])&&(o=a[e]),r.value&&(o=r.value({props:i,state:c,close:s,focus:d,event:f,onError:l,container:u})),!r.default||Qe(o)||Qe(a[n])||(o=r.default({props:i,state:c,close:s,focus:d,event:f,onError:l,container:u})),Qe(o)){if(r.type===dr.ARRAY?!Array.isArray(o):typeof o!==r.type)throw new TypeError("Prop is not of type "+r.type+": "+n)}else if(!1!==r.required&&!Qe(a[n]))throw new Error('Expected prop "'+n+'" to be defined');return Qe(o)&&r.decorate&&(o=r.decorate({value:o,props:i,state:c,close:s,focus:d,event:f,onError:l,container:u})),o}())}})}),xr(i,e,Ye)}function Se(e){return ue?ue(e):Ae.try(function(){return tn(e)}).then(function(e){return wn(e)&&(e=function e(n){var r=function(){var e=function(e){for(;e.parentNode;)e=e.parentNode;if(wn(e))return e}(n);if(e&&e.host)return e.host}();if(!r)throw new Error("Element is not in shadow dom");var t="shadow-slot-"+Je(),o=document.createElement("slot");o.setAttribute("name",t),n.appendChild(o);o=document.createElement("div");return o.setAttribute("slot",t),r.appendChild(o),wn(r)?e(o):o}(e)),ar(h=e)})}var De=function(e){return We(e),te.then(function(){var n=d,r=X;if(n&&r&&f)return N(f).then(function(e){return n.updateProps(e).catch(function(n){return Z(r).then(function(e){if(!e)throw n})})})})};return{init:function(){ie.on(hr.RENDER,function(){return ae.onRender()}),ie.on(hr.DISPLAY,function(){return ae.onDisplay()}),ie.on(hr.RENDERED,function(){return ae.onRendered()}),ie.on(hr.CLOSE,function(){return ae.onClose()}),ie.on(hr.DESTROY,function(){return ae.onDestroy()}),ie.on(hr.RESIZE,function(){return ae.onResize()}),ie.on(hr.FOCUS,function(){return ae.onFocus()}),ie.on(hr.PROPS,function(e){return ae.onProps(e)}),ie.on(hr.ERROR,function(e){return ae&&ae.onError?ae.onError(e):D(e).then(function(){setTimeout(function(){throw e},1)})}),oe.register(ie.reset)},render:function(e){var P=e.target,O=e.container,C=e.context,W=e.rerender;return Ae.try(function(){var d=F(),f=re||F();!function(e,n,r){if(e!==window){if(!Fe(window,e))throw new Error("Can only renderTo an adjacent frame");var t=je();if(!Me(n,t)&&!Re(e))throw new Error("Can not render remotely to "+n.toString()+" - can only render to "+t);if(r&&"string"!=typeof r)throw new Error("Container passed to renderTo must be a string selector, got "+typeof r+" }")}}(P,f,O);var e=Ae.try(function(){if(P!==window)return function(e,r){for(var n={},t=0,o=Object.keys(ae);t<o.length;t++){var i=o[t],a=Q[i];a&&a.allowDelegate&&(n[i]=ae[i])}var u=nr(r,"zoid_delegate_"+ne,{uid:$,overrides:{props:n,event:ie,close:Ee,onError:G,getInternalState:A,setInternalState:j,resolveInitPromise:S,rejectInitPromise:D}}).then(function(e){var n=e.data.parent;return oe.register(function(e){if(!ke(r))return n.destroy(e)}),n.getDelegateOverrides()}).catch(function(e){throw new Error("Unable to delegate rendering. Possibly the component is not loaded in the target window.\n\n"+Ge(e))});return ue=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.getProxyContainer.apply(e,n)})},de=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.renderContainer.apply(e,n)})},ce=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.show.apply(e,n)})},se=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.hide.apply(e,n)})},ye=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.watchForUnload.apply(e,n)})},e===lr.IFRAME?(fe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.getProxyWindow.apply(e,n)})},he=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.openFrame.apply(e,n)})},we=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.openPrerenderFrame.apply(e,n)})},pe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.prerender.apply(e,n)})},me=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.open.apply(e,n)})},ve=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.openPrerender.apply(e,n)})}):e===lr.POPUP&&(le=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.then(function(e){return e.setProxyWin.apply(e,n)})}),u}(C,P)}),r=ae.window,n=Y(),t=Pr(Q,ae,"post"),o=ie.trigger(hr.RENDER),i=Se(O),a=R(),u=i.then(function(){return We()}),c=u.then(function(){return Pr(Q,ae,"get").then(function(e){return n=qe(z()),t=(r={query:e}).query||{},o=r.hash||{},e=n.split("#"),r=e[1],n=(e=(n=e[0]).split("?"))[0],t=nn(e[1],t),o=nn(r,o),t&&(n=n+"?"+t),o&&(n=n+"#"+o),n;var n,r,t,o})}),s=a.then(function(e){return e={proxyWin:(n={proxyWin:e,initialChildDomain:d,childDomainMatch:f,target:P,context:C}).proxyWin,initialChildDomain:n.initialChildDomain,childDomainMatch:n.childDomainMatch,target:n.target,context:n.context},i=e.proxyWin,a=e.initialChildDomain,u=e.childDomainMatch,c=void 0===(n=e.target)?window:n,r=(e={proxyWin:i,initialChildDomain:a,childDomainMatch:u,context:s=e.context}).proxyWin,t=e.childDomainMatch,o=e.context,N(e.initialChildDomain).then(function(e){return{uid:$,context:o,tag:ee,childDomainMatch:t,version:"9_0_86",props:e,exports:(n=r,{init:function(e){return B(this.origin,e)},close:Ee,checkClose:function(){return Z(n)},resize:J,onError:G,show:k,hide:I,export:V})};var n}).then(function(e){var n=cr({data:e,metaData:{windowRef:q(c,a,s,i)},sender:{domain:je(window)},receiver:{win:i,domain:u},passByReference:a===je()}),e=n.serializedData;return oe.register(n.cleanReference),e}).then(function(e){return wr({name:ne,serializedPayload:e})});var r,t,o,i,a,u,c,s,n}),l=s.then(function(e){return M(C,{windowName:e})}),h=U(C),w=Ae.hash({proxyContainer:i,proxyFrame:l,proxyPrerenderFrame:h}).then(function(e){return Oe(e.proxyContainer,{context:C,proxyFrame:e.proxyFrame,proxyPrerenderFrame:e.proxyPrerenderFrame,rerender:W})}).then(function(e){return e}),p=Ae.hash({windowName:s,proxyFrame:l,proxyWin:a}).then(function(e){var n=e.proxyWin;return r?n:H(C,{windowName:e.windowName,proxyWin:n,proxyFrame:e.proxyFrame})}),m=Ae.hash({proxyWin:p,proxyPrerenderFrame:h}).then(function(e){return L(C,e.proxyWin,e.proxyPrerenderFrame)}),v=p.then(function(e){return T(X=e)}),y=Ae.hash({proxyPrerenderWin:m,state:v}).then(function(e){return Pe(e.proxyPrerenderWin,{context:C})}),g=Ae.hash({proxyWin:p,windowName:s}).then(function(e){if(r)return e.proxyWin.setName(e.windowName)}),b=Ae.hash({body:t}).then(function(e){return K.method||(Object.keys(e.body).length?"post":"get")}),E=Ae.hash({proxyWin:p,windowUrl:c,body:t,method:b,windowName:g,prerender:y}).then(function(e){return e.proxyWin.setLocation(e.windowUrl,{method:e.method,body:e.body})}),_=p.then(function(e){!function n(r,t){var o=!1;return oe.register(function(){o=!0}),Ae.delay(2e3).then(function(){return r.isClosed()}).then(function(e){if(!o)return e?Ee(new Error("Detected "+t+" close")):n(r,t)})}(e,C)}),x=Ae.hash({container:w,prerender:y}).then(function(){return ie.trigger(hr.DISPLAY)}),a=p.then(function(e){return n=e,t=d,o=C,Ae.try(function(){return n.awaitWindow()}).then(function(e){if(er&&er.needsBridge({win:e,domain:t})&&!er.hasBridge(t,t)){var n="function"==typeof K.bridgeUrl?K.bridgeUrl({props:ae}):K.bridgeUrl;if(!n)throw new Error("Bridge needed to render "+o);var r=Ue(n);return er.linkUrl(e,t),er.openBridge(qe(n),r)}});var n,t,o}),t=E.then(function(){return Ae.try(function(){var e=ae.timeout;if(e)return te.timeout(e,new Error("Loading component timed out after "+e+" milliseconds"))})}),b=te.then(function(){return ie.trigger(hr.RENDERED)});return Ae.hash({initPromise:te,buildUrlPromise:c,onRenderPromise:o,getProxyContainerPromise:i,openFramePromise:l,openPrerenderFramePromise:h,renderContainerPromise:w,openPromise:p,openPrerenderPromise:m,setStatePromise:v,prerenderPromise:y,loadUrlPromise:E,buildWindowNamePromise:s,setWindowNamePromise:g,watchForClosePromise:_,onDisplayPromise:x,openBridgePromise:a,runTimeoutPromise:t,onRenderedPromise:b,delegatePromise:e,watchForUnloadPromise:n,finalSetPropsPromise:u})}).catch(function(e){return Ae.all([G(e),t(e)]).then(function(){throw e},function(){throw e})}).then(Ye)},destroy:t,getProps:function(){return ae},setProps:We,export:V,getHelpers:Ce,getDelegateOverrides:function(){return Ae.try(function(){return{getProxyContainer:Se,show:k,hide:I,renderContainer:Oe,getProxyWindow:R,watchForUnload:Y,openFrame:M,openPrerenderFrame:U,prerender:Pe,open:H,openPrerender:L,setProxyWin:T}})},getExports:function(){return E({getExports:function(){return _e}})}}}function Cr(e){var n=e.uid,r=e.frame,t=e.prerenderFrame,o=e.doc,i=e.props,a=e.event,u=e.dimensions,c=u.width,e=u.height;if(r&&t){var s=o.createElement("div");s.setAttribute("id",n);u=o.createElement("style");return i.cspNonce&&u.setAttribute("nonce",i.cspNonce),u.appendChild(o.createTextNode("\n            #"+n+" {\n                display: inline-block;\n                position: relative;\n                width: "+c+";\n                height: "+e+";\n            }\n\n            #"+n+" > iframe {\n                display: inline-block;\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                transition: opacity .2s ease-in-out;\n            }\n\n            #"+n+" > iframe.zoid-invisible {\n                opacity: 0;\n            }\n\n            #"+n+" > iframe.zoid-visible {\n                opacity: 1;\n        }\n        ")),s.appendChild(r),s.appendChild(t),s.appendChild(u),t.classList.add("zoid-visible"),r.classList.add("zoid-invisible"),a.on(hr.RENDERED,function(){t.classList.remove("zoid-visible"),t.classList.add("zoid-invisible"),r.classList.remove("zoid-invisible"),r.classList.add("zoid-visible"),setTimeout(function(){fn(t)},1)}),a.on(hr.RESIZE,function(e){var n=e.width,e=e.height;"number"==typeof n&&(s.style.width=ye(n)),"number"==typeof e&&(s.style.height=ye(e))}),s}}function Wr(e){var n=e.doc,r=e.props,t=n.createElement("html"),o=n.createElement("body"),i=n.createElement("style"),e=n.createElement("div");return e.classList.add("spinner"),r.cspNonce&&i.setAttribute("nonce",r.cspNonce),t.appendChild(o),o.appendChild(e),o.appendChild(i),i.appendChild(n.createTextNode("\n            html, body {\n                width: 100%;\n                height: 100%;\n            }\n\n            .spinner {\n                position: fixed;\n                max-height: 60vmin;\n                max-width: 60vmin;\n                height: 40px;\n                width: 40px;\n                top: 50%;\n                left: 50%;\n                box-sizing: border-box;\n                border: 3px solid rgba(0, 0, 0, .2);\n                border-top-color: rgba(33, 128, 192, 0.8);\n                border-radius: 100%;\n                animation: rotation .7s infinite linear;\n            }\n\n            @keyframes rotation {\n                from {\n                    transform: translateX(-50%) translateY(-50%) rotate(0deg);\n                }\n                to {\n                    transform: translateX(-50%) translateY(-50%) rotate(359deg);\n                }\n            }\n        ")),t}var Sr=en(),Dr=en();function Nr(g){function n(){if(function(e){try{return pr(window.name).name===e}catch(e){}}(l)){var e=vr().payload;if(e.tag===h&&Me(e.childDomainMatch,je()))return!0}return!1}var e,r,o=function(){var e=g.tag,n=g.url,r=g.domain,t=g.bridgeUrl,o=g.props,i=void 0===o?{}:o,a=g.dimensions,u=void 0===a?{}:a,c=g.autoResize,s=void 0===c?{}:c,d=g.allowedParentDomains,f=void 0===d?"*":d,l=g.attributes,h=void 0===l?{}:l,w=g.defaultContext,p=void 0===w?lr.IFRAME:w,m=g.containerTemplate,v=void 0===m?Cr:m,o=g.prerenderTemplate,a=void 0===o?Wr:o,c=g.validate,d=g.eligible,l=void 0===d?function(){return{eligible:!0}}:d,w=g.logger,m=void 0===w?{info:Ye}:w,o=g.exports,y=void 0===o?Ye:o,d=g.method,w=g.children,o=void 0===w?function(){return{}}:w,w=e.replace(/-/g,"_"),i=Ne({},{window:{type:dr.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(e){e=e.value;if(!A(e)&&!Mn.isProxyWindow(e))throw new Error("Expected Window or ProxyWindow");if(A(e)){if(ke(e))throw new Error("Window is closed");if(!Re(e))throw new Error("Window is not same domain")}},decorate:function(e){return rr(e.value)}},timeout:{type:dr.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:dr.STRING,required:!1},onDisplay:{type:dr.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Er,decorate:_r},onRendered:{type:dr.FUNCTION,required:!1,sendToChild:!1,default:Er,decorate:_r},onRender:{type:dr.FUNCTION,required:!1,sendToChild:!1,default:Er,decorate:_r},onClose:{type:dr.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Er,decorate:_r},onDestroy:{type:dr.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Er,decorate:_r},onResize:{type:dr.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Er},onFocus:{type:dr.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Er},close:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.close}},focus:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.focus}},resize:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.resize}},uid:{type:dr.STRING,required:!1,sendToChild:!1,childDecorate:function(e){return e.uid}},tag:{type:dr.STRING,required:!1,sendToChild:!1,childDecorate:function(e){return e.tag}},getParent:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.getParent}},getParentDomain:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.getParentDomain}},show:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.show}},hide:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.hide}},export:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.export}},onError:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.onError}},onProps:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.onProps}},getSiblings:{type:dr.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(e){return e.getSiblings}}},i);if(!v)throw new Error("Container template required");return{name:w,tag:e,url:n,domain:r,bridgeUrl:t,method:d,propsDef:i,dimensions:u,autoResize:s,allowedParentDomains:f,attributes:h,defaultContext:p,containerTemplate:v,prerenderTemplate:a,validate:c,logger:m,eligible:l,children:o,exports:"function"==typeof y?y:function(e){for(var r=e.getExports,o={},n=0,i=Object.keys(y);n<i.length;n++)!function(e){var n=i[e],e=y[n].type,t=r().then(function(e){return e[n]});o[n]=e===dr.FUNCTION?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.then(function(e){return e.apply(void 0,n)})}:t}(n);return o}}}(),l=o.name,h=o.tag,w=o.defaultContext,p=o.eligible,m=o.children,t=or(window),v=[],i=He(function(){if(n()){if(window.xprops)throw delete t.components[h],new Error("Can not register "+l+" as child - child already registered");var e=function(o){var s,d=o.tag,i=o.propsDef,t=o.autoResize,a=o.allowedParentDomains,u=[],e=vr(),n=e.parent,r=e.payload,f=n.win,c=n.domain,l=new Ae,e=r.version,h=r.uid,n=r.exports,w=r.context,p=r.props;if("9_0_86"!==e)throw new Error("Parent window has zoid version "+e+", child window has version 9_0_86");function m(){return f}function v(){return c}function y(e){return u.push(e),{cancel:function(){u.splice(u.indexOf(e),1)}}}function g(e){return N.fireAndForget({width:e.width,height:e.height})}function b(e){return l.resolve(e),D(e)}function E(e){var n=(void 0===e?{}:e).anyParent,r=[],t=s.parent;if(void 0===n&&(n=!t),!n&&!t)throw new Error("No parent found for "+d+" child");for(var o=0,i=k(window);o<i.length;o++){var a,u,c=i[o];!Re(c)||(a=Te(c).xprops)&&f===a.getParent()&&(u=a.parent,(n||!t||u&&u.uid===t.uid)&&(c=ir(c,function(e){return e.exports}),r.push({props:a,exports:c})))}return r}function _(e,n,r){void 0===r&&(r=!1),r=function(e,n,r,t,o,i){void 0===i&&(i=!1);for(var a={},u=0,c=Object.keys(r);u<c.length;u++){var s,d=c[u],f=n[d];f&&f.sameDomain&&(t!==je(window)||!Re(e))||(s=yr(n,0,d,r[d],o),a[d]=s,f&&f.alias&&!a[f.alias]&&(a[f.alias]=s))}if(!i)for(var l=0,h=Object.keys(n);l<h.length;l++){var w=h[l];r.hasOwnProperty(w)||(a[w]=yr(n,0,w,void 0,o))}return a}(f,i,e,n,{tag:d,show:P,hide:O,close:C,focus:gr,onError:W,resize:g,getSiblings:E,onProps:y,getParent:m,getParentDomain:v,uid:h,export:b},r),s?Xe(s,r):s=r;for(var t=0;t<u.length;t++)(0,u[t])(s)}function x(e){return Ae.try(function(){return _(e,c,!0)})}var P=n.show,O=n.hide,C=n.close,W=n.onError,S=n.checkClose,D=n.export,N=n.resize,A=n.init;return{init:function(){return Ae.try(function(){var e,n,r,t;return Re(f)&&(e={componentName:o.name,parentComponentWindow:f},n=e.componentName,r=e.parentComponentWindow,t=sr({data:pr(window.name).serializedInitialPayload,sender:{win:r},basic:!0}),e=t.sender,"uid"!==t.reference.type&&"global"!==t.metaData.windowRef.type||(e=cr({data:t.data,metaData:{windowRef:function(e,n){if(void 0===n&&(n=window),e===j(n))return{type:"parent",distance:ze(e)};if(e===R(n))return{type:"opener"};if(Re(e)&&e!==T(e)){e=Te(e).name;if(e)return{type:"name",name:e}}}(r)},sender:{domain:e.domain},receiver:{win:window,domain:je()},basic:!0}),window.name=wr({name:n,serializedPayload:e.serializedData}))),or(window).exports=o.exports({getExports:function(){return l}}),function(e){if(!Me(a,e))throw new Error("Can not be rendered by domain: "+e)}(c),mn(f),window.addEventListener("beforeunload",function(){S.fireAndForget()}),window.addEventListener("unload",function(){S.fireAndForget()}),Le(f,function(){br()}),A({updateProps:x,close:br})}).then(function(){return e=t.width,n=void 0!==e&&e,e=t.height,r=void 0!==e&&e,tn(void 0===(e=t.element)?"body":e).catch(Ye).then(function(e){return{width:n,height:r,element:e}}).then(function(e){var n=e.width,r=e.height,e=e.element;e&&(n||r)&&w!==lr.POPUP&&hn(e,function(e){g({width:n?e.width:void 0,height:r?e.height:void 0})},{width:n,height:r})});var n,r,e}).catch(function(e){W(e)})},getProps:function(){return s||(_(p,c),s)}}}(o);return e.init(),e}});if(i(),e=Qn("zoid_allow_delegate_"+l,function(){return!0}),r=Qn("zoid_delegate_"+l,function(e){var n=e.data;return{parent:Or({uid:n.uid,options:o,overrides:n.overrides,parentWin:e.source})}}),Dr.register(e.cancel),Dr.register(r.cancel),t.components=t.components||{},t.components[h])throw new Error("Can not register multiple components with the same tag: "+h);return t.components[h]=!0,{init:function n(e){var i="zoid-"+h+"-"+Je(),a=e||{},e=p({props:a}),u=e.eligible,c=e.reason,r=a.onDestroy;a.onDestroy=function(){if(f&&u&&v.splice(v.indexOf(f),1),r)return r.apply(void 0,arguments)};var s=Or({uid:i,options:o});s.init(),u?s.setProps(a):a.onDestroy&&a.onDestroy(),Sr.register(function(e){return s.destroy(e||new Error("zoid destroyed all components"))});function d(e){return e=(void 0===e?{}:e).decorate,n((void 0===e?function(e){return e}:e)(a))}function t(t,n,o){return Ae.try(function(){if(!u){var e=new Error(c||l+" component is not eligible");return s.destroy(e).then(function(){throw e})}if(!A(t))throw new Error("Must pass window to renderTo");return n=a,r=o,Ae.try(function(){if(n.window)return rr(n.window).getType();if(r){if(r!==lr.IFRAME&&r!==lr.POPUP)throw new Error("Unrecognized context: "+r);return r}return w});var n,r}).then(function(e){if(n=function(e,n){if(n){if("string"!=typeof n&&!ue(n))throw new TypeError("Expected string or element selector to be passed");return n}if(e===lr.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(e,n),t!==window&&"string"!=typeof n)throw new Error("Must pass string element when rendering to another window");return s.render({target:t,container:n,context:e,rerender:function(){var e=d();return Xe(f,e),e.renderTo(t,n,o)}})}).catch(function(e){return s.destroy(e).then(function(){throw e})})}var f=Ne({},s.getExports(),s.getHelpers(),function(){for(var n=m(),t={},e=0,o=Object.keys(n);e<o.length;e++)!function(e){var e=o[e],r=n[e];t[e]=function(e){var n=s.getProps(),n=Ne({},e,{parent:{uid:i,props:n,export:s.export}});return r(n)}}(e);return t}(),{isEligible:function(){return u},clone:d,render:function(e,n){return t(window,e,n)},renderTo:t});return u&&v.push(f),f},instances:v,driver:function(e,n){throw new Error("Driver support not enabled")},isChild:n,canRenderTo:function(e){return nr(e,"zoid_allow_delegate_"+l).then(function(e){return e.data}).catch(function(){return!1})},registerChild:i}}var Ar=function(e){var r,t,n,a,o,i;ge().initialized||(ge().initialized=!0,o=(c={on:Qn,send:nr}).on,i=c.send,(c=ge()).receiveMessage=c.receiveMessage||function(e){return Kn(e,{on:o,send:i})},n=(c={on:Qn,send:nr}).on,a=c.send,Ee().getOrSet("postMessageListener",function(){return cn(window,"message",function(e){var t,o,i;t=e,o=(e={on:n,send:a}).on,i=e.send,Ae.try(function(){var e=t.source||t.sourceElement,n=t.origin||t.originalEvent&&t.originalEvent.origin,r=t.data;if("null"===n&&(n="file://"),e){if(!n)throw new Error("Post message did not have origin domain");Kn({source:e,origin:n,data:r},{on:o,send:i})}})})}),In({on:Qn,send:nr,receiveMessage:Kn}),r=(c={on:Qn,send:nr}).on,t=c.send,Ee("builtinListeners").getOrSet("helloListener",function(){var e=r("postrobot_hello",{domain:"*"},function(e){return Ce(e.source,{domain:e.origin}),{instanceID:Oe()}}),n=Ie();return n&&We(n,{send:t}).catch(function(e){}),e}));var u=Nr(e),c=function(e){return u.init(e)};c.driver=function(e,n){return u.driver(e,n)},c.isChild=function(){return u.isChild()},c.canRenderTo=function(e){return u.canRenderTo(e)},c.instances=u.instances;e=u.registerChild();return e&&(window.xprops=c.xprops=e.getProps()),c};function jr(e){er&&er.destroyBridges();e=Sr.all(e);return Sr=en(),e}var Rr=jr;function Tr(e){var n;return Rr(),delete window.__zoid_9_0_86__,function(){for(var e=Ee("responseListeners"),n=0,r=e.keys();n<r.length;n++){var t=r[n],o=e.get(t);o&&(o.cancelled=!0),e.del(t)}}(),(n=Ee().get("postMessageListener"))&&n.cancel(),delete window.__post_robot_10_0_44__,Dr.all(e)}}],o.c=t,o.d=function(e,n,r){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(n,e){if(1&e&&(n=o(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var t in n)o.d(r,t,function(e){return n[e]}.bind(null,t));return r},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return{}.hasOwnProperty.call(e,n)},o.p="",o(o.s=0);function o(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return r[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}var r,t}),
// window.Checkout=zoid.create({tag:"zoid-checkout",url:"https://sandbox.cert.cash/#/",dimensions:{width:"420px",height:"600px"},defaultContext:"popup"});
window.Checkout=zoid.create({tag:"zoid-checkout",url:"http://localhost:3000/#/",dimensions:{width:"420px",height:"600px"},defaultContext:"popup"});